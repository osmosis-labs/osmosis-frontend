"use strict";(self.webpackChunk_keplr_wallet_extension=self.webpackChunk_keplr_wallet_extension||[]).push([[92],{56379:function(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.useIBCAmountConfig=t.IBCAmountConfig=void 0;const o=r(96682),i=r(80075),s=r(45137),a=r(2784);class c extends o.AmountConfig{constructor(e,t,r,n,o,s){super(e,t,r,n),this.channelConfig=o,this.isIBCTransfer=!1,this.isIBCTransfer=s,(0,i.makeObservable)(this)}canUseCurrency(e){return this.isIBCTransfer?"native"===new s.DenomHelper(e.coinMinimalDenom).type:super.canUseCurrency(e)}setIsIBCTransfer(e){this.isIBCTransfer=e}}n([i.observable],c.prototype,"isIBCTransfer",void 0),n([i.action],c.prototype,"setIsIBCTransfer",null),t.IBCAmountConfig=c,t.useIBCAmountConfig=(e,t,r,n,o,i)=>{const[s]=(0,a.useState)((()=>new c(e,t,r,n,o,i)));return s.setChain(r),s.setIsIBCTransfer(i),s}},18172:function(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.useIBCChannelConfig=t.IBCChannelConfig=void 0;const o=r(80075),i=r(73100),s=r(2784);class a{constructor(e){this._channels=[],this._disabled=!1,this._disabled=e,(0,o.makeObservable)(this)}get channels(){return this._disabled?[]:this._channels}get uiProperties(){return this._disabled?{}:0===this._channels.length?{error:new i.ChannelNotSetError("Channel not set")}:{}}setChannels(e){this._channels=[...e]}setDisabled(e){this._disabled=e}}n([o.observable.ref],a.prototype,"_channels",void 0),n([o.observable],a.prototype,"_disabled",void 0),n([o.computed],a.prototype,"channels",null),n([o.computed],a.prototype,"uiProperties",null),n([o.action],a.prototype,"setChannels",null),n([o.action],a.prototype,"setDisabled",null),t.IBCChannelConfig=a,t.useIBCChannelConfig=(e=!1)=>{const[t]=(0,s.useState)((()=>new a(e)));return t.setDisabled(e),t}},73100:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelNotSetError=void 0;class r extends Error{constructor(e){super(e),Object.setPrototypeOf(this,r.prototype)}}t.ChannelNotSetError=r},17394:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(56379),t),o(r(18172),t),o(r(73100),t),o(r(75304),t),o(r(5010),t)},68148:function(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.useIBCRecipientConfig=t.IBCRecipientConfig=void 0;const o=r(96682),i=r(2784),s=r(80075),a=r(73100);class c extends o.RecipientConfig{constructor(e,t,r,n){super(e,t),this.channelConfig=r,this.isIBCTransfer=!1,this.isIBCTransfer=n,(0,s.makeObservable)(this)}get chainId(){return this.isIBCTransfer&&0!==this.channelConfig.channels.length?this.channelConfig.channels[this.channelConfig.channels.length-1].counterpartyChainId:super.chainId}get uiProperties(){return this.isIBCTransfer&&0===this.channelConfig.channels.length?{error:new a.ChannelNotSetError("Channel not set")}:super.uiProperties}setIsIBCTransfer(e){this.isIBCTransfer=e}}n([s.observable],c.prototype,"isIBCTransfer",void 0),n([s.override],c.prototype,"uiProperties",null),n([s.action],c.prototype,"setIsIBCTransfer",null),t.IBCRecipientConfig=c,t.useIBCRecipientConfig=(e,t,r,n={},o)=>{const[s]=(0,i.useState)((()=>new c(e,t,r,o)));return s.setChain(t),s.setAllowHexAddressToBech32Address(n.allowHexAddressToBech32Address),s.setAllowHexAddressOnly(n.allowHexAddressOnly),s.setICNS(n.icns),s.setIsIBCTransfer(o),s}},75304:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useSendMixedIBCTransferConfig=t.useIBCTransferConfig=void 0;const n=r(96682),o=r(56379),i=r(18172),s=r(68148);t.useIBCTransferConfig=(e,t,r,a,c,u={})=>{const l=(0,i.useIBCChannelConfig)(),d=(0,n.useSenderConfig)(e,r,a),h=(0,o.useIBCAmountConfig)(e,t,r,d,l,!0),f=(0,n.useMemoConfig)(e,r),p=(0,n.useGasConfig)(e,r,c),g=(0,n.useFeeConfig)(e,t,r,d,h,p);return h.setFeeConfig(g),{amountConfig:h,memoConfig:f,gasConfig:p,feeConfig:g,recipientConfig:(0,s.useIBCRecipientConfig)(e,r,l,u,!0),channelConfig:l,senderConfig:d}},t.useSendMixedIBCTransferConfig=(e,t,r,a,c,u,l={})=>{const d=(0,i.useIBCChannelConfig)(!u),h=(0,n.useSenderConfig)(e,r,a),f=(0,o.useIBCAmountConfig)(e,t,r,h,d,u),p=(0,n.useMemoConfig)(e,r),g=(0,n.useGasConfig)(e,r,c),m=(0,n.useFeeConfig)(e,t,r,h,f,g,{computeTerraClassicTax:!u&&l.computeTerraClassicTax});return f.setFeeConfig(m),{amountConfig:f,memoConfig:p,gasConfig:g,feeConfig:m,recipientConfig:(0,s.useIBCRecipientConfig)(e,r,d,l,u),channelConfig:d,senderConfig:h}}},5010:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},76092:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(96682),t),o(r(79263),t),o(r(17394),t)},319:function(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.useSignDocAmountConfig=t.SignDocAmountConfig=void 0;const o=r(96682),i=r(80075),s=r(16261),a=r(2784),c=r(75263);class u extends o.TxChainSetter{constructor(e,t,r){super(e,t),this.senderConfig=r,this.signDocHelper=void 0,this._disableBalanceCheck=!1,(0,i.makeObservable)(this)}setSignDocHelper(e){this.signDocHelper=e}get amount(){var e;return this.disableBalanceCheck||!(null===(e=this.signDocHelper)||void 0===e?void 0:e.signDocWrapper)||0===this.chainInfo.feeCurrencies.length?[]:"amino"===this.signDocHelper.signDocWrapper.mode?this.computeAmountInAminoMsgs(this.signDocHelper.signDocWrapper.aminoSignDoc.msgs):this.computeAmountInProtoMsgs(this.signDocHelper.signDocWrapper.protoSignDoc.txMsgs)}computeAmountInAminoMsgs(e){const t=[];for(const r of e)try{switch(r.type){case"cosmos-sdk/MsgSend":if(r.value.from_address&&r.value.from_address===this.senderConfig.sender&&r.value.amount&&Array.isArray(r.value.amount))for(const e of r.value.amount)t.push(new s.CoinPretty(this.chainInfo.forceFindCurrency(e.denom),e.amount));break;case"cosmos-sdk/MsgDelegate":r.value.delegator_address&&r.value.delegator_address===this.senderConfig.sender&&r.value.amount&&r.value.amount.amount&&r.value.amount.denom&&t.push(new s.CoinPretty(this.chainInfo.forceFindCurrency(r.value.amount.denom),r.value.amount.amount));break;case"cosmos-sdk/MsgTransfer":r.value.sender&&r.value.sender===this.senderConfig.sender&&r.value.token&&r.value.token.amount&&r.value.token.denom&&t.push(new s.CoinPretty(this.chainInfo.forceFindCurrency(r.value.token.denom),r.value.token.amount))}}catch(e){console.log(`Error on the parsing the msg: ${e.message||e.toString()}`)}return this.mergeDuplicatedAmount(t)}computeAmountInProtoMsgs(e){const t=[];for(const r of e)try{if(!(r instanceof c.UnknownMessage)&&"unpacked"in r)switch(r.typeUrl){case"/cosmos.bank.v1beta1.MsgSend":{const e=r.unpacked;if(e.fromAddress&&e.fromAddress===this.senderConfig.sender)for(const r of e.amount)t.push(new s.CoinPretty(this.chainInfo.forceFindCurrency(r.denom),r.amount));break}case"/cosmos.staking.v1beta1.MsgDelegate":{const e=r.unpacked;e.delegatorAddress&&e.delegatorAddress===this.senderConfig.sender&&e.amount&&t.push(new s.CoinPretty(this.chainInfo.forceFindCurrency(e.amount.denom),e.amount.amount));break}case"/ibc.applications.transfer.v1.MsgTransfer":{const e=r.unpacked;e.sender&&e.sender===this.senderConfig.sender&&e.token&&t.push(new s.CoinPretty(this.chainInfo.forceFindCurrency(e.token.denom),e.token.amount));break}}}catch(e){console.log(`Error on the parsing the msg: ${e.message||e.toString()}`)}return this.mergeDuplicatedAmount(t)}mergeDuplicatedAmount(e){const t=new Map;for(const r of e){let e=t.get(r.currency.coinMinimalDenom);e?(e=e.add(r),t.set(r.currency.coinMinimalDenom,e)):(e=r,t.set(r.currency.coinMinimalDenom,e))}return Array.from(t.values())}get uiProperties(){return{}}setDisableBalanceCheck(e){this._disableBalanceCheck=e}get disableBalanceCheck(){return this._disableBalanceCheck}}n([i.observable.ref],u.prototype,"signDocHelper",void 0),n([i.observable],u.prototype,"_disableBalanceCheck",void 0),n([i.action],u.prototype,"setSignDocHelper",null),n([i.computed],u.prototype,"amount",null),n([i.computed],u.prototype,"uiProperties",null),n([i.action],u.prototype,"setDisableBalanceCheck",null),t.SignDocAmountConfig=u,t.useSignDocAmountConfig=(e,t,r)=>{const[n]=(0,a.useState)((()=>new u(e,t,r)));return n.setChain(t),n}},36983:function(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.useSignDocHelper=t.SignDocHelper=void 0;const o=r(80075),i=r(2784),s=r(75263),a=r(12136),c=r(45137);class u{constructor(e,t){this.feeConfig=e,this.memoConfig=t,this._signDocWrapper=void 0,(0,o.makeObservable)(this)}get signDocWrapper(){var e,t;if(!this._signDocWrapper)return;if(this._signDocWrapper.isADR36SignDoc)return this._signDocWrapper;const r=this.feeConfig.toStdFee();if("amino"===this._signDocWrapper.mode){const e=this._signDocWrapper.aminoSignDoc,t=Object.assign(Object.assign({},e),{fee:(()=>{const t=Object.assign({},r);return e.fee.feePayer&&(t.feePayer=e.fee.feePayer),e.fee.granter&&(t.granter=e.fee.granter),e.fee.payer&&(t.payer=e.fee.payer),t})(),memo:(0,c.escapeHTML)(this.memoConfig.memo)});return s.SignDocWrapper.fromAminoSignDoc(t)}if(this._signDocWrapper.isDirectAux){const e=this._signDocWrapper.protoSignDoc,t=Object.assign(Object.assign({},e.signDoc),{bodyBytes:a.TxBody.encode(Object.assign(Object.assign({},e.txBody),{memo:this.memoConfig.memo})).finish()});return s.SignDocWrapper.fromDirectAuxSignDoc(t)}const n=this._signDocWrapper.protoSignDoc,o=a.Fee.fromPartial({gasLimit:r.gas,amount:r.amount.map((e=>({amount:e.amount,denom:e.denom}))),granter:null===(e=n.authInfo.fee)||void 0===e?void 0:e.granter,payer:null===(t=n.authInfo.fee)||void 0===t?void 0:t.payer}),i=Object.assign(Object.assign({},n.signDoc),{bodyBytes:a.TxBody.encode(Object.assign(Object.assign({},n.txBody),{memo:this.memoConfig.memo})).finish(),authInfoBytes:a.AuthInfo.encode(Object.assign(Object.assign({},n.authInfo),{fee:o})).finish()});return s.SignDocWrapper.fromDirectSignDoc(i)}get signDocJson(){if(this.signDocWrapper)return"amino"===this.signDocWrapper.mode?this.signDocWrapper.aminoSignDoc:this.signDocWrapper.protoSignDoc.toJSON()}setSignDocWrapper(e){this._signDocWrapper=e}}n([o.observable.ref],u.prototype,"_signDocWrapper",void 0),n([o.computed],u.prototype,"signDocWrapper",null),n([o.computed],u.prototype,"signDocJson",null),n([o.action],u.prototype,"setSignDocWrapper",null),t.SignDocHelper=u,t.useSignDocHelper=(e,t)=>{const[r]=(0,i.useState)((()=>new u(e,t)));return r}},79263:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(319),t),o(r(36983),t)},15340:function(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.useAmountConfig=t.AmountConfig=void 0;const o=r(39939),i=r(80075),s=r(81242),a=r(16261),c=r(2784);class u extends o.TxChainSetter{constructor(e,t,r,n){super(e,r),this.queriesStore=t,this.senderConfig=n,this._currency=void 0,this._value="",this._fraction=0,this._feeConfig=void 0,(0,i.makeObservable)(this)}get feeConfig(){return this._feeConfig}setFeeConfig(e){this._feeConfig=e}get value(){if(this.fraction>0){let e=this.queriesStore.get(this.chainId).queryBalances.getQueryBech32Address(this.senderConfig.sender).getBalanceFromCurrency(this.currency);if(this.feeConfig)for(const t of this.feeConfig.fees)e=e.sub(t);return e.toDec().lte(new a.Dec(0))?"0":e.mul(new a.Dec(this.fraction)).trim(!0).locale(!1).hideDenom(!0).toString()}return this._value}setValue(e){e.startsWith(".")&&(e="0"+e),this._value=e,this.setFraction(0)}get amount(){let e;try{e=""===this.value.trim()?new a.Dec(0):new a.Dec(this.value)}catch(t){e=new a.Dec(0)}return[new a.CoinPretty(this.currency,e.mul(a.DecUtils.getTenExponentN(this.currency.coinDecimals)).truncate())]}get currency(){const e=this.chainInfo;if(this._currency){const t=e.findCurrency(this._currency.coinMinimalDenom);if(t)return t}if(0===e.currencies.length)throw new Error("Chain doesn't have the sendable currency informations");return e.currencies[0]}setCurrency(e){var t;(null==e?void 0:e.coinMinimalDenom)!==(null===(t=this._currency)||void 0===t?void 0:t.coinMinimalDenom)&&(this._value="",this.setFraction(0)),this._currency=e}get fraction(){return this._fraction}setFraction(e){this._fraction=e}canUseCurrency(e){return null!=this.chainInfo.findCurrency(e.coinMinimalDenom)}get uiProperties(){if(!this.currency)return{error:new Error("Currency to send not set")};if(""===this.value.trim())return{error:new s.EmptyAmountError("Amount is empty")};try{const e=new a.Dec(this.value);if(e.equals(new a.Dec(0)))return{error:new s.ZeroAmountError("Amount is zero")};if(e.lt(new a.Dec(0)))return{error:new s.NegativeAmountError("Amount is negative")}}catch(e){return{error:new s.InvalidNumberAmountError("Invalid form of number")}}for(const e of this.amount){const t=e.currency;if(!this.canUseCurrency(t))return{error:new s.NotSupportedCurrencyError("Not supported currency")};const r=this.queriesStore.get(this.chainId).queryBalances.getQueryBech32Address(this.senderConfig.sender).balances.find((e=>e.currency.coinMinimalDenom===t.coinMinimalDenom));if(!r)return{warning:new Error(`Can't parse the balance for ${t.coinMinimalDenom}`)};if(r.error)return{warning:new Error("Failed to fetch balance")};if(!r.response)return{loadingState:"loading-block"};if(r.balance.toDec().lt(e.toDec()))return{error:new s.InsufficientAmountError("Insufficient amount"),loadingState:r.isFetching?"loading":void 0}}return{}}}n([i.observable.ref],u.prototype,"_currency",void 0),n([i.observable],u.prototype,"_value",void 0),n([i.observable],u.prototype,"_fraction",void 0),n([i.observable.ref],u.prototype,"_feeConfig",void 0),n([i.action],u.prototype,"setFeeConfig",null),n([i.computed],u.prototype,"value",null),n([i.action],u.prototype,"setValue",null),n([i.computed],u.prototype,"amount",null),n([i.computed],u.prototype,"currency",null),n([i.action],u.prototype,"setCurrency",null),n([i.action],u.prototype,"setFraction",null),n([i.computed],u.prototype,"uiProperties",null),t.AmountConfig=u,t.useAmountConfig=(e,t,r,n)=>{const[o]=(0,c.useState)((()=>new u(e,t,r,n)));return o.setChain(r),o}},39939:function(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.TxChainSetter=void 0;const o=r(80075);class i{constructor(e,t){this.chainGetter=e,this._chainId=t,(0,o.makeObservable)(this)}get chainInfo(){return this.chainGetter.getChain(this.chainId)}get chainId(){return this._chainId}setChain(e){this._chainId=e}}n([o.observable],i.prototype,"_chainId",void 0),n([o.computed],i.prototype,"chainInfo",null),n([o.action],i.prototype,"setChain",null),t.TxChainSetter=i},81242:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MemoSuspectMnemonicInclusion=t.InvalidHexError=t.NotSupportedCurrencyError=t.UnknownCurrencyError=t.InsufficientFeeError=t.NotLoadedFeeError=t.InsufficientAmountError=t.NegativeAmountError=t.ZeroAmountError=t.InvalidNumberAmountError=t.EmptyAmountError=t.ICNSFailedToFetchError=t.ICNSIsFetchingError=t.InvalidBech32Error=t.EmptyAddressError=void 0;class r extends Error{constructor(e){super(e),Object.setPrototypeOf(this,r.prototype)}}t.EmptyAddressError=r;class n extends Error{constructor(e){super(e),Object.setPrototypeOf(this,n.prototype)}}t.InvalidBech32Error=n;class o extends Error{constructor(e){super(e),Object.setPrototypeOf(this,o.prototype)}}t.ICNSIsFetchingError=o;class i extends Error{constructor(e){super(e),Object.setPrototypeOf(this,i.prototype)}}t.ICNSFailedToFetchError=i;class s extends Error{constructor(e){super(e),Object.setPrototypeOf(this,s.prototype)}}t.EmptyAmountError=s;class a extends Error{constructor(e){super(e),Object.setPrototypeOf(this,a.prototype)}}t.InvalidNumberAmountError=a;class c extends Error{constructor(e){super(e),Object.setPrototypeOf(this,c.prototype)}}t.ZeroAmountError=c;class u extends Error{constructor(e){super(e),Object.setPrototypeOf(this,u.prototype)}}t.NegativeAmountError=u;class l extends Error{constructor(e){super(e),Object.setPrototypeOf(this,l.prototype)}}t.InsufficientAmountError=l;class d extends Error{constructor(e){super(e),Object.setPrototypeOf(this,d.prototype)}}t.NotLoadedFeeError=d;class h extends Error{constructor(e){super(e),Object.setPrototypeOf(this,h.prototype)}}t.InsufficientFeeError=h;class f extends Error{constructor(e){super(e),Object.setPrototypeOf(this,f.prototype)}}t.UnknownCurrencyError=f;class p extends Error{constructor(e){super(e),Object.setPrototypeOf(this,f.prototype)}}t.NotSupportedCurrencyError=p;class g extends Error{constructor(e){super(e),Object.setPrototypeOf(this,g.prototype)}}t.InvalidHexError=g;class m extends Error{constructor(e){super(e),Object.setPrototypeOf(this,m.prototype)}}t.MemoSuspectMnemonicInclusion=m},1519:function(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.useFeeConfig=t.FeeConfig=void 0;const o=r(56689),i=r(39939),s=r(80075),a=r(16261),c=r(58242),u=r(2784),l=r(81242),d=r(45137),h={low:{percentile:10,baseFeePercentageMultiplier:new a.Dec(1.1),priorityFeePercentageMultiplier:new a.Dec(.94),minSuggestedMaxPriorityFeePerGas:new a.Dec(1e9)},average:{percentile:20,baseFeePercentageMultiplier:new a.Dec(1.2),priorityFeePercentageMultiplier:new a.Dec(.97),minSuggestedMaxPriorityFeePerGas:new a.Dec(15e8)},high:{percentile:30,baseFeePercentageMultiplier:new a.Dec(1.25),priorityFeePercentageMultiplier:new a.Dec(.98),minSuggestedMaxPriorityFeePerGas:new a.Dec(2e9)}},f="latest",p=[h.low.percentile,h.average.percentile,h.high.percentile];class g extends i.TxChainSetter{constructor(e,t,r,n,i,u,l=!0,d=!1){super(e,r),this.queriesStore=t,this.senderConfig=n,this.amountConfig=i,this.gasConfig=u,this._fee=void 0,this.additionAmountToNeedFee=!0,this.computeTerraClassicTax=!1,this._disableBalanceCheck=!1,this.getFeeTypePrettyForFeeCurrency=(0,c.computedFn)(((e,t)=>{const r=this.gasConfig.gas,n=this.getGasPriceForFeeCurrency(e,t).mul(new a.Dec(r));return new a.CoinPretty(e,n.roundUp()).maxDecimals(e.coinDecimals)})),this.getGasPriceForFeeCurrency=(0,c.computedFn)(((e,t)=>{var r,n,i,s,c,u,l,d,h,f;if(this.chainInfo.hasFeature("osmosis-base-fee-beta")||this.canOsmosisTxFeesAndReady()){const p=this.queriesStore.get(this.chainId).osmosis;if(p){const g=p.queryTxFeesBaseDenom.baseDenom;let m=this.selectableFeeCurrencies.find((e=>e.coinMinimalDenom===g))||this.chainInfo.feeCurrencies[0];if(this.chainInfo.hasFeature("osmosis-base-fee-beta")){const e=this.queriesStore.simpleQuery.queryGet("https://gjsttg7mkgtqhjpt3mv5aeuszi0zblbb.lambda-url.us-west-2.on.aws/osmosis/osmosis-base-fee-beta.json"),t=p.queryBaseFee.baseFee;if(t){const f=(null===(r=e.response)||void 0===r?void 0:r.data.low)?parseFloat(t.mul(new a.Dec(e.response.data.low)).toString(8)):null!==(i=null===(n=m.gasPriceStep)||void 0===n?void 0:n.low)&&void 0!==i?i:o.DefaultGasPriceStep.low,p=Math.max(f,(null===(s=e.response)||void 0===s?void 0:s.data.average)?parseFloat(t.mul(new a.Dec(e.response.data.average)).toString(8)):null!==(u=null===(c=m.gasPriceStep)||void 0===c?void 0:c.average)&&void 0!==u?u:o.DefaultGasPriceStep.average),g=Math.max(p,(null===(l=e.response)||void 0===l?void 0:l.data.high)?parseFloat(t.mul(new a.Dec(e.response.data.high)).toString(8)):null!==(h=null===(d=m.gasPriceStep)||void 0===d?void 0:d.high)&&void 0!==h?h:o.DefaultGasPriceStep.high);m=Object.assign(Object.assign({},m),{gasPriceStep:{low:f,average:p,high:g}})}}if(this.canOsmosisTxFeesAndReady()&&e.coinMinimalDenom!==g&&p.queryTxFeesFeeTokens.isTxFeeToken(e.coinMinimalDenom)){const r=null!==(f=m.gasPriceStep)&&void 0!==f?f:o.DefaultGasPriceStep,n=new a.Dec(r[t].toString()),i=p.queryTxFeesSpotPriceByDenom.getQueryDenom(e.coinMinimalDenom).spotPriceDec;return i.gt(new a.Dec(0))?n.quo(i).mul(new a.Dec(1.01)):new a.Dec(0)}if(e.coinMinimalDenom===m.coinMinimalDenom)return this.populateGasPriceStep(m,t)}}if(this.canEIP1559TxFeesAndReady()){const{maxFeePerGas:e}=this.getEIP1559TxFees(t);return e}return this.populateGasPriceStep(e,t)})),this.getEIP1559TxFees=(0,c.computedFn)((e=>{var t,r,n,o,i;if(this.canEIP1559TxFeesAndReady()){const s=this.queriesStore.get(this.chainId).ethereum,c=null==s?void 0:s.queryEthereumFeeHistory.getQueryByFeeHistoryParams(3,f,p).feeHistory;if(c){const s=parseInt(null!==(r=null===(t=c.baseFeePerGas)||void 0===t?void 0:t[c.baseFeePerGas.length-1])&&void 0!==r?r:"0"),u=new a.Dec(s).mul(h[e].baseFeePercentageMultiplier),l=null===(n=c.reward)||void 0===n?void 0:n.map((t=>t[p.findIndex((t=>t===h[e].percentile))])),d=null!==(i=null===(o=null==l?void 0:l.sort(((e,t)=>parseInt(e)-parseInt(t))))||void 0===o?void 0:o[Math.floor((l.length-1)/2)])&&void 0!==i?i:"0",f=new a.Dec(parseInt(d)).mul(h[e].priorityFeePercentageMultiplier),g=f.gt(h[e].minSuggestedMaxPriorityFeePerGas)?f:h[e].minSuggestedMaxPriorityFeePerGas,m=u.add(g);return{maxPriorityFeePerGas:g.truncateDec(),maxFeePerGas:m.truncateDec()}}}return{maxPriorityFeePerGas:new a.Dec(0),maxFeePerGas:new a.Dec(0)}})),this.additionAmountToNeedFee=l,this.computeTerraClassicTax=d,(0,s.makeObservable)(this)}setAdditionAmountToNeedFee(e){this.additionAmountToNeedFee=e}setComputeTerraClassicTax(e){this.computeTerraClassicTax=e}setDisableBalanceCheck(e){this._disableBalanceCheck=e}get disableBalanceCheck(){return this._disableBalanceCheck}get type(){return this.fee&&"type"in this.fee?this.fee.type:"manual"}get fee(){if(this._fee){if("type"in this._fee){const e=this._fee.currency.coinMinimalDenom,t=this.chainGetter.getChain(this.chainId).feeCurrencies.find((t=>t.coinMinimalDenom===e)),r=this.chainGetter.getChain(this.chainId).forceFindCurrency(e);return{type:this._fee.type,currency:Object.assign(Object.assign({},t),r)}}return this._fee.map((e=>{const t=e.currency.coinMinimalDenom,r=this.chainGetter.getChain(this.chainId).feeCurrencies.find((e=>e.coinMinimalDenom===t)),n=this.chainGetter.getChain(this.chainId).forceFindCurrency(t);return new a.CoinPretty(Object.assign(Object.assign({},r),n),e.toCoin().amount)}))}}setFee(e){this._fee=e&&"type"in e?Object.assign({},e):e?"length"in e?e:[e]:void 0}get selectableFeeCurrencies(){if(this.canOsmosisTxFeesAndReady()){const e=this.queriesStore.get(this.chainId).osmosis;if(e){const t=e.queryTxFeesFeeTokens,r={};return this.chainInfo.feeCurrencies.concat(t.feeCurrencies).filter((e=>!r[e.coinMinimalDenom]&&(r[e.coinMinimalDenom]=!0,!0))).sort(((t,r)=>{if(t.coinMinimalDenom===e.queryTxFeesBaseDenom.baseDenom)return-1;if(r.coinMinimalDenom===e.queryTxFeesBaseDenom.baseDenom)return 1;const n=t.coinMinimalDenom.startsWith("ibc/"),o=r.coinMinimalDenom.startsWith("ibc/");return n&&!o?1:!n&&o||t.coinMinimalDenom<r.coinMinimalDenom?-1:1}))}}const e=[];for(const t of this.chainInfo.feeCurrencies){const r=this.chainInfo.findCurrency(t.coinMinimalDenom);r&&e.push(Object.assign(Object.assign({},t),r))}return e}toStdFee(){const e=this.getFeePrimitive();return{gas:this.gasConfig.gas.toString(),amount:e.map((e=>({amount:e.amount,denom:e.currency.coinMinimalDenom})))}}get fees(){return this.getFeePrimitive().map((e=>new a.CoinPretty(e.currency,e.amount)))}getFeePrimitive(){let e=[];if(e=this.fee?"type"in this.fee?[{amount:this.getFeeTypePrettyForFeeCurrency(this.fee.currency,this.fee.type).toCoin().amount,currency:this.fee.currency}]:this.fee.map((e=>({amount:e.toCoin().amount,currency:e.currency}))):[],e.length>0&&this.computeTerraClassicTax&&this.chainInfo.features&&this.chainInfo.features.includes("terra-classic-fee")){const t=this.queriesStore.get(this.chainId).keplrETC;if(t&&t.queryTerraClassicTaxRate.response&&t.queryTerraClassicTaxCaps.response){const r=t.queryTerraClassicTaxRate.taxRate;if(r&&r.toDec().gt(new a.Dec(0))){const n=this.amountConfig.amount;for(const o of n)if("native"===new d.DenomHelper(o.currency.coinMinimalDenom).type){let n=o.toDec().mul(a.DecUtils.getTenExponentN(o.currency.coinDecimals)).mul(r.toDec());const i=t.queryTerraClassicTaxCaps.getTaxCaps(o.currency.coinMinimalDenom);i&&n.roundUp().gt(i)&&(n=i.toDec());const s=n.roundUp();if(s.isPositive()){const t=e.findIndex((e=>e.currency.coinMinimalDenom===o.currency.coinMinimalDenom));t>=0?e[t]={amount:new a.Int(e[t].amount).add(s).toString(),currency:e[t].currency}:e.push({amount:s.toString(),currency:o.currency})}}}}}return e}canOsmosisTxFeesAndReady(){if(this.chainInfo.hasFeature("osmosis-txfees")){const e=this.queriesStore.get(this.chainId);if(!e.osmosis)return console.log("Chain has osmosis-txfees feature. But no osmosis queries provided."),!1;const t=e.osmosis.queryTxFeesBaseDenom;if(t.baseDenom&&this.chainInfo.feeCurrencies.find((e=>e.coinMinimalDenom===t.baseDenom)))return!0}return!1}canEIP1559TxFeesAndReady(){if(this.chainInfo.evm){const e=this.queriesStore.get(this.chainId);if(!e.ethereum)return console.log("Chain supports EVM. But no ethereum queries provided."),!1;const t=e.ethereum.queryEthereumFeeHistory.getQueryByFeeHistoryParams(3,f,p).feeHistory,r=e.ethereum.queryEthereumBlock.getQueryByBlockNumberOrTag(f).block;if((null==t?void 0:t.baseFeePerGas)&&(null==r?void 0:r.baseFeePerGas))return!0}return!1}populateGasPriceStep(e,t){var r;const n=null!==(r=e.gasPriceStep)&&void 0!==r?r:o.DefaultGasPriceStep;let i=new a.Dec(0);switch(t){case"low":i=new a.Dec(n.low);break;case"average":i=new a.Dec(n.average);break;case"high":i=new a.Dec(n.high);break;default:throw new Error(`Unknown fee type: ${t}`)}return i}get uiProperties(){if(this.disableBalanceCheck)return{};const e=this.getFeePrimitive();if(!e)return{};if(e.length>0&&this.computeTerraClassicTax&&this.chainInfo.features&&this.chainInfo.features.includes("terra-classic-fee")){const e=this.queriesStore.get(this.chainId).keplrETC;if(e){if(e.queryTerraClassicTaxRate.error||e.queryTerraClassicTaxRate.isFetching)return{error:(()=>{if(e.queryTerraClassicTaxRate.error)return new Error("Failed to fetch tax rate")})(),loadingState:e.queryTerraClassicTaxRate.isFetching?"loading-block":void 0};if(e.queryTerraClassicTaxCaps.error||e.queryTerraClassicTaxCaps.isFetching)return{error:(()=>{if(e.queryTerraClassicTaxCaps.error)return new Error("Failed to fetch tax rate")})(),loadingState:e.queryTerraClassicTaxCaps.isFetching?"loading-block":void 0}}}if(this.chainInfo.hasFeature("osmosis-base-fee-beta")){const e=this.queriesStore.get(this.chainId).osmosis;if(e){const t=e.queryBaseFee;if(!t.baseFee)return{loadingState:"loading-block"};if(t.isFetching)return{loadingState:"loading"};if(t.error)return{warning:new Error("Failed to fetch base fee")}}}if(this.canOsmosisTxFeesAndReady()){const e=this.queriesStore.get(this.chainId).osmosis;if(e&&this.getFeePrimitive().length>0){const t=e.queryTxFeesBaseDenom.baseDenom,r=this.getFeePrimitive()[0].currency;if(r.coinMinimalDenom!==t&&e.queryTxFeesFeeTokens.isTxFeeToken(r.coinMinimalDenom)){const t=e.queryTxFeesSpotPriceByDenom.getQueryDenom(r.coinMinimalDenom),n=(()=>{if(t.error)return new Error("Failed to fetch spot price")})(),o=t.response?t.isFetching?"loading":void 0:"loading-block";if(n||o)return{error:n,loadingState:o}}}}const t=this.amountConfig.amount,r=e.slice();if(this.additionAmountToNeedFee)for(let e=0;e<r.length;e++){const n=r[e];for(const o of t)n.currency.coinMinimalDenom===o.currency.coinMinimalDenom&&(r[e]=Object.assign(Object.assign({},n),{amount:new a.Int(n.amount).add(new a.Int(o.toCoin().amount)).toString()}))}for(let e=0;e<r.length;e++){const t=r[e];if(new a.Int(t.amount).lte(new a.Int(0)))continue;const n=this.queriesStore.get(this.chainId).queryBalances.getQueryBech32Address(this.senderConfig.value).balances.find((e=>e.currency.coinMinimalDenom===t.currency.coinMinimalDenom));if(!n)return{warning:new Error(`Can't parse the balance for ${t.currency.coinMinimalDenom}`)};if(n.error)return{warning:new Error("Failed to fetch balance")};if(!n.response)return{loadingState:"loading-block"};if(new a.Int(n.balance.toCoin().amount).lt(new a.Int(t.amount)))return{error:new l.InsufficientFeeError("Insufficient fee"),loadingState:n.isFetching?"loading":void 0}}return{}}}n([s.observable.ref],g.prototype,"_fee",void 0),n([s.observable],g.prototype,"additionAmountToNeedFee",void 0),n([s.observable],g.prototype,"computeTerraClassicTax",void 0),n([s.observable],g.prototype,"_disableBalanceCheck",void 0),n([s.action],g.prototype,"setAdditionAmountToNeedFee",null),n([s.action],g.prototype,"setComputeTerraClassicTax",null),n([s.action],g.prototype,"setDisableBalanceCheck",null),n([s.computed],g.prototype,"fee",null),n([s.action],g.prototype,"setFee",null),n([s.computed],g.prototype,"selectableFeeCurrencies",null),n([s.computed],g.prototype,"fees",null),n([s.computed],g.prototype,"uiProperties",null),t.FeeConfig=g,t.useFeeConfig=(e,t,r,n,o,i,s={})=>{var a,c;const[l]=(0,u.useState)((()=>{var a,c;return new g(e,t,r,n,o,i,null===(a=s.additionAmountToNeedFee)||void 0===a||a,null!==(c=s.computeTerraClassicTax)&&void 0!==c&&c)}));return l.setChain(r),l.setAdditionAmountToNeedFee(null===(a=s.additionAmountToNeedFee)||void 0===a||a),l.setComputeTerraClassicTax(null!==(c=s.computeTerraClassicTax)&&void 0!==c&&c),l}},29513:function(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.useGasSimulator=t.GasSimulator=void 0;const o=r(80075),i=r(2784),s=r(75263),a=r(39939),c=r(96618);class u{constructor(){this._outdatedCosmosSdk=!1,this._initialGasEstimated=null,this._isInitialized=!1,this._recentGasEstimated=void 0,this._tx=void 0,this._stdFee=void 0,this._error=void 0,(0,o.makeObservable)(this)}get outdatedCosmosSdk(){return this._outdatedCosmosSdk}setIsInitialized(e){this._isInitialized=e}get isInitialized(){return this._isInitialized}setOutdatedCosmosSdk(e){this._outdatedCosmosSdk=e}get initialGasEstimated(){return this._initialGasEstimated}setInitialGasEstimated(e){this._initialGasEstimated=e}get recentGasEstimated(){return this._recentGasEstimated}setRecentGasEstimated(e){this._recentGasEstimated=e}get tx(){return this._tx}refreshTx(e){this._tx=e}get stdFee(){return this._stdFee}refreshStdFee(e){this._stdFee=e}get error(){return this._error}setError(e){this._error=e}static isZeroFee(e){if(!e)return!0;for(const t of e)if("0"!==t.amount)return!1;return!0}}n([o.observable],u.prototype,"_outdatedCosmosSdk",void 0),n([o.observable],u.prototype,"_initialGasEstimated",void 0),n([o.observable],u.prototype,"_isInitialized",void 0),n([o.observable],u.prototype,"_recentGasEstimated",void 0),n([o.observable.ref],u.prototype,"_tx",void 0),n([o.observable.ref],u.prototype,"_stdFee",void 0),n([o.observable.ref],u.prototype,"_error",void 0),n([o.action],u.prototype,"setIsInitialized",null),n([o.action],u.prototype,"setOutdatedCosmosSdk",null),n([o.action],u.prototype,"setInitialGasEstimated",null),n([o.action],u.prototype,"setRecentGasEstimated",null),n([o.action],u.prototype,"refreshTx",null),n([o.action],u.prototype,"refreshStdFee",null),n([o.action],u.prototype,"setError",null);class l extends a.TxChainSetter{constructor(e,t,r,n,i,s,a){super(t,r),this.kvStore=e,this.gasConfig=n,this.feeConfig=i,this.initialKey=s,this.simulateGasFn=a,this._gasAdjustmentValue="1.3",this._enabled=!1,this._forceDisabled=!1,this._forceDisableReason=void 0,this._isSimulating=!1,this._stateMap=new Map,this._disposers=[],this._key=s,(0,o.makeObservable)(this),this.init()}setKVStore(e){this.kvStore=e}get key(){return this._key}setKey(e){this._key=e}get isSimulating(){return this._isSimulating}setSimulateGasFn(e){this.simulateGasFn=e}get enabled(){return!this._forceDisabled&&this._enabled}setEnabled(e){this._forceDisabled&&e?console.log("Gas simulator is disabled by force. You can not enable the gas simulator"):this._enabled=e}get forceDisabled(){return this._forceDisabled}get forceDisableReason(){return this._forceDisableReason}forceDisable(e){e?(this.enabled&&this.setEnabled(!1),this._forceDisabled=!0,"boolean"!=typeof e&&(this._forceDisableReason=e)):(this._forceDisabled=!1,this._forceDisableReason=void 0)}get outdatedCosmosSdk(){const e=this.storeKey;return this.getState(e).outdatedCosmosSdk}get error(){const e=this.storeKey;return this.getState(e).error}get gasEstimated(){const e=this.storeKey,t=this.getState(e);return null!=t.recentGasEstimated?t.recentGasEstimated:null!=t.initialGasEstimated?t.initialGasEstimated:void 0}get gasAdjustment(){if(""===this._gasAdjustmentValue)return 0;const e=parseFloat(this._gasAdjustmentValue);return Number.isNaN(e)||e<0?0:e}get gasAdjustmentValue(){return this._gasAdjustmentValue}setGasAdjustmentValue(e){if("number"==typeof e){if(e<0||e>2)return;return void(this._gasAdjustmentValue=e.toString())}if(""===e)return void(this._gasAdjustmentValue="");e.startsWith(".")&&(this._gasAdjustmentValue="0"+e);const t=parseFloat(e);Number.isNaN(t)||t<0||t>2||(this._gasAdjustmentValue=e)}init(){this._disposers.push((0,o.autorun)((()=>{if(!this.enabled)return;const e=this.storeKey,t=this.getState(e);this.kvStore.get(e).then((e=>{e&&t.setInitialGasEstimated(e),t.setIsInitialized(!0)}))}))),this._disposers.push((0,o.autorun)((()=>{if(this.enabled)try{const e=this.storeKey,t=this.getState(e);if(!t.isInitialized)return;const r=this.simulateGasFn(),n=this.feeConfig.toStdFee();(0,o.runInAction)((()=>{var e;(null!=t.recentGasEstimated&&null==t.error||t.outdatedCosmosSdk)&&u.isZeroFee(null===(e=t.stdFee)||void 0===e?void 0:e.amount)===u.isZeroFee(n.amount)||(t.refreshTx(r),t.refreshStdFee(n))}))}catch(e){return void console.log(e)}}))),this._disposers.push((0,o.autorun)((()=>{const e=this.storeKey,t=this.getState(e);if(!t.tx)return;const r=t.tx.simulate(t.stdFee);(0,o.runInAction)((()=>{this._isSimulating=!0})),r.then((({gasUsed:r})=>{(!t.recentGasEstimated||Math.abs(t.recentGasEstimated-r)/t.recentGasEstimated>.02)&&t.setRecentGasEstimated(r),t.setOutdatedCosmosSdk(!1),t.setError(void 0),this.kvStore.set(e,r).catch((e=>{console.log(e)}))})).catch((e=>{var r,n,o;if(console.log(e),(0,c.isSimpleFetchError)(e)&&e.response){const i=e.response;if(400===i.status&&(null===(r=i.data)||void 0===r?void 0:r.message)&&"string"==typeof i.data.message&&i.data.message.includes("invalid empty tx"))return void t.setOutdatedCosmosSdk(!0);let s="";const a=e.response.headers&&e.response.headers.get("content-type")||"";if(a.startsWith("text/plain")&&"string"==typeof e.response.data&&(s=e.response.data),a.startsWith("application/json")&&(null===(n=e.response.data)||void 0===n?void 0:n.message)&&"string"==typeof(null===(o=e.response.data)||void 0===o?void 0:o.message)&&(s=e.response.data.message),""!==s)return void t.setError(new Error(s))}t.setError(e)})).finally((()=>{(0,o.runInAction)((()=>{this._isSimulating=!1}))}))}))),this._disposers.push((0,o.autorun)((()=>{this.enabled&&null!=this.gasEstimated&&this.gasConfig.setValue(this.gasEstimated*this.gasAdjustment)})))}dispose(){for(const e of this._disposers)e()}get uiProperties(){const e=this.storeKey,t=this.getState(e);return{warning:(()=>this.outdatedCosmosSdk?new Error("Outdated Cosmos SDK"):this.forceDisableReason?this.forceDisableReason:this.error?this.error:void 0)(),loadingState:(()=>{if(this.enabled)return this.isSimulating?null==t.initialGasEstimated?"loading-block":"loading":void 0})()}}getState(e){return this._stateMap.has(e)||(0,o.runInAction)((()=>{this._stateMap.set(e,new u)})),this._stateMap.get(e)}get storeKey(){return`${s.ChainIdHelper.parse(this.chainId).identifier}/${this.key}`}}n([o.observable],l.prototype,"_key",void 0),n([o.observable],l.prototype,"_gasAdjustmentValue",void 0),n([o.observable],l.prototype,"_enabled",void 0),n([o.observable],l.prototype,"_forceDisabled",void 0),n([o.observable],l.prototype,"_forceDisableReason",void 0),n([o.observable],l.prototype,"_isSimulating",void 0),n([o.observable.shallow],l.prototype,"_stateMap",void 0),n([o.action],l.prototype,"setKey",null),n([o.action],l.prototype,"setEnabled",null),n([o.action],l.prototype,"forceDisable",null),n([o.action],l.prototype,"setGasAdjustmentValue",null),n([o.computed],l.prototype,"storeKey",null),t.GasSimulator=l,t.useGasSimulator=(e,t,r,n,o,s,a,c)=>{const[u]=(0,i.useState)((()=>{const i=new l(e,t,r,n,o,s,a);return c?i.setEnabled(!1):i.setEnabled(!0),i}));return u.setKVStore(e),u.setChain(r),u.setKey(s),u.setSimulateGasFn(a),(0,i.useEffect)((()=>()=>{u.dispose()}),[u]),u}},296:function(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.useZeroAllowedGasConfig=t.useGasConfig=t.GasConfig=void 0;const o=r(39939),i=r(80075),s=r(2784);class a extends o.TxChainSetter{constructor(e,t,r,n){super(e,t),this._value="",this._allowZeroGas=void 0,r&&(this._value=r.toString()),this._allowZeroGas=n,(0,i.makeObservable)(this)}get value(){return this._value}setValue(e){this._value="number"==typeof e?Math.ceil(e).toString():e}get gas(){if(""===this.value.trim())return 0;const e=Number.parseInt(this.value);return Number.isNaN(e)?0:e}get uiProperties(){if(""===this.value.trim())return{error:new Error("Gas not set")};const e=Number.parseFloat(this.value);if(Number.isNaN(e))return{error:new Error("Gas is not valid number")};if(this.value.includes(".")||!Number.isInteger(e))return{error:new Error("Gas is not integer")};if(this._allowZeroGas){if(this.gas<0)return{error:new Error("Gas should be greater or equal than 0")}}else if(this.gas<=0)return{error:new Error("Gas should be greater than 0")};return{}}}n([i.observable],a.prototype,"_value",void 0),n([i.observable],a.prototype,"_allowZeroGas",void 0),n([i.action],a.prototype,"setValue",null),n([i.computed],a.prototype,"uiProperties",null),t.GasConfig=a,t.useGasConfig=(e,t,r)=>{const[n]=(0,s.useState)((()=>new a(e,t,r)));return n.setChain(t),n},t.useZeroAllowedGasConfig=(e,t,r)=>{const[n]=(0,s.useState)((()=>new a(e,t,r,!0)));return n.setChain(t),n}},96682:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(81242),t),o(r(56689),t),o(r(7090),t),o(r(1519),t),o(r(296),t),o(r(71987),t),o(r(15340),t),o(r(88579),t),o(r(96765),t),o(r(39939),t),o(r(29513),t),o(r(8575),t)},7090:function(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.useMemoConfig=t.MemoConfig=void 0;const o=r(80075),i=r(39939),s=r(2784),a=r(81242),c=r(45137);class u extends i.TxChainSetter{constructor(e,t){super(e,t),this._value="",(0,o.makeObservable)(this)}get memo(){return this._value}get value(){return this._value}setValue(e){this._value=e}get uiProperties(){const e=this.memo.trim().split(" ").map((e=>e.trim())).filter((e=>e.length>0));if(e.length>=8&&e.length<=32){const t=e.length/4*3;let r=0;for(const t of e)(0,c.isMnemonicWord)(t.toLowerCase())&&r++;if(r>=t)return{error:new a.MemoSuspectMnemonicInclusion("Memo contains mnemonic")}}return{}}}n([o.observable],u.prototype,"_value",void 0),n([o.action],u.prototype,"setValue",null),n([o.computed],u.prototype,"uiProperties",null),t.MemoConfig=u,t.useMemoConfig=(e,t)=>{const[r]=(0,s.useState)((()=>new u(e,t)));return r.setChain(t),r}},71987:function(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.useRecipientConfig=t.RecipientConfig=void 0;const o=r(39939),i=r(34600),s=r(80075),a=r(81242),c=r(75263),u=r(2784),l=r(48834),d=r(45137);class h extends o.TxChainSetter{constructor(e,t){super(e,t),this._value="",this._allowHexAddressToBech32Address=void 0,this._allowHexAddressOnly=void 0,this._bech32Prefix=void 0,this._icns=void 0,this._icnsFetchDataMap=new Map,(0,s.makeObservable)(this)}get bech32Prefix(){return this._bech32Prefix?this._bech32Prefix:this.chainInfo.bech32Config.bech32PrefixAccAddr}setBech32Prefix(e){this._bech32Prefix=e}getICNSFetchData(e){if(!this._icns)throw new Error("ICNS is not set");if(!this.chainGetter.hasChain(this._icns.chainId))throw new Error(`Can't find chain: ${this._icns.chainId}`);const t=`${c.ChainIdHelper.parse(this._icns.chainId).identifier}/${this._icns.resolverContractAddress}/${e}`;if(!this._icnsFetchDataMap.has(t)){(0,s.runInAction)((()=>{this._icnsFetchDataMap.set(t,{isFetching:!0})}));const r=this.chainGetter.getChain(this._icns.chainId),n=JSON.stringify({address_by_icns:{icns:e}});fetch(new URL(`/cosmwasm/wasm/v1/contract/${this._icns.resolverContractAddress}/smart/${l.Buffer.from(n).toString("base64")}`,r.rest).toString()).then((e=>{if(e.ok)e.json().then((e=>{(0,s.runInAction)((()=>{this._icnsFetchDataMap.set(t,{isFetching:!1,bech32Address:e.data.bech32_address})}))}));else{const e=new Error("Failed to fetch");(0,s.runInAction)((()=>{this._icnsFetchDataMap.set(t,{isFetching:!1,error:e})}))}}))}return this._icnsFetchDataMap.get(t)}setICNS(e){this._icns=e}get isICNSEnabled(){return!!this._icns}get isICNSName(){return!!this._icns&&(0,d.validateICNSName)(this.value.trim(),this.bech32Prefix)}get isICNSFetching(){return!!this.isICNSName&&this.getICNSFetchData(this.value.trim()).isFetching}get icnsExpectedBech32Prefix(){return this.bech32Prefix}get recipient(){var e,t;const r=this.value.trim();if(this.isICNSName)try{return this.getICNSFetchData(r).bech32Address||""}catch(e){return""}const n=this.chainInfo,o=!!i.EthereumAccountBase.evmInfo(this.chainInfo);return(60===n.bip44.coinType||(null===(e=n.features)||void 0===e?void 0:e.includes("eth-address-gen"))||(null===(t=n.features)||void 0===t?void 0:t.includes("eth-key-sign"))||o)&&i.EthereumAccountBase.isEthereumHexAddressWithChecksum(r)&&this._allowHexAddressToBech32Address?new c.Bech32Address(l.Buffer.from(r.replace("0x","").toLowerCase(),"hex")).toBech32(this.bech32Prefix):r}setAllowHexAddressToBech32Address(e){this._allowHexAddressToBech32Address=e}setAllowHexAddressOnly(e){this._allowHexAddressOnly=e}get uiProperties(){var e,t;const r=this.value.trim();if(!r)return{error:new a.EmptyAddressError("Address is empty")};if(this.isICNSName)try{const e=this.getICNSFetchData(r);return e.isFetching?{loadingState:"loading-block"}:e.bech32Address?e.error?{error:new a.ICNSFailedToFetchError("Failed to fetch the address from ICNS"),loadingState:e.isFetching?"loading-block":void 0}:{}:{error:new a.ICNSFailedToFetchError("Failed to fetch the address from ICNS"),loadingState:e.isFetching?"loading-block":void 0}}catch(e){return{error:e}}const n=this.chainInfo,o=!!i.EthereumAccountBase.evmInfo(this.chainInfo);if((60===n.bip44.coinType||(null===(e=n.features)||void 0===e?void 0:e.includes("eth-address-gen"))||(null===(t=n.features)||void 0===t?void 0:t.includes("eth-key-sign"))||o)&&(r.startsWith("0x")||this._allowHexAddressOnly))return i.EthereumAccountBase.isEthereumHexAddressWithChecksum(r)?{}:{error:new a.InvalidHexError("Invalid hex address for chain")};try{c.Bech32Address.validate(this.recipient,this.bech32Prefix)}catch(e){return{error:new a.InvalidBech32Error(`Invalid bech32: ${e.message||e.toString()}`)}}return{}}get value(){return this._value}setValue(e){this._value=e}get isRecipientEthereumHexAddress(){const e=this.value.trim();return i.EthereumAccountBase.isEthereumHexAddressWithChecksum(e)}}n([s.observable],h.prototype,"_value",void 0),n([s.observable],h.prototype,"_allowHexAddressToBech32Address",void 0),n([s.observable],h.prototype,"_allowHexAddressOnly",void 0),n([s.observable],h.prototype,"_bech32Prefix",void 0),n([s.observable.struct],h.prototype,"_icns",void 0),n([s.observable.shallow],h.prototype,"_icnsFetchDataMap",void 0),n([s.computed],h.prototype,"bech32Prefix",null),n([s.action],h.prototype,"setBech32Prefix",null),n([s.action],h.prototype,"setICNS",null),n([s.computed],h.prototype,"isICNSName",null),n([s.computed],h.prototype,"isICNSFetching",null),n([s.action],h.prototype,"setAllowHexAddressToBech32Address",null),n([s.action],h.prototype,"setAllowHexAddressOnly",null),n([s.computed],h.prototype,"uiProperties",null),n([s.action],h.prototype,"setValue",null),n([s.computed],h.prototype,"isRecipientEthereumHexAddress",null),t.RecipientConfig=h,t.useRecipientConfig=(e,t,r={})=>{const[n]=(0,u.useState)((()=>new h(e,t)));return n.setChain(t),n.setAllowHexAddressToBech32Address(r.allowHexAddressToBech32Address),n.setAllowHexAddressToBech32Address(r.allowHexAddressOnly),n.setICNS(r.icns),n}},96765:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useSendTxConfig=void 0;const n=r(96682),o=r(15340);t.useSendTxConfig=(e,t,r,i,s,a={})=>{const c=(0,n.useSenderConfig)(e,r,i),u=(0,o.useAmountConfig)(e,t,r,c),l=(0,n.useMemoConfig)(e,r),d=(0,n.useGasConfig)(e,r,s),h=(0,n.useFeeConfig)(e,t,r,c,u,d,a);return u.setFeeConfig(h),{senderConfig:c,amountConfig:u,memoConfig:l,gasConfig:d,feeConfig:h,recipientConfig:(0,n.useRecipientConfig)(e,r,a)}}},88579:function(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.useSenderConfig=t.SenderConfig=void 0;const o=r(39939),i=r(80075),s=r(2784);class a extends o.TxChainSetter{constructor(e,t,r){super(e,t),this._value="",this._value=r,(0,i.makeObservable)(this)}get sender(){return this._value}get value(){return this._value}setValue(e){this._value=e}get uiProperties(){return{}}}n([i.observable],a.prototype,"_value",void 0),n([i.action],a.prototype,"setValue",null),t.SenderConfig=a,t.useSenderConfig=(e,t,r)=>{const[n]=(0,s.useState)((()=>new a(e,t,r)));return n.setChain(t),n.setValue(r),n}},56689:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultGasPriceStep=void 0,t.DefaultGasPriceStep={low:.01,average:.025,high:.04}},8575:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useTxConfigsValidate=void 0,t.useTxConfigsValidate=e=>{var t,r,n,o,i,s,a,c,u,l,d,h,f,p,g,m;return{interactionBlocked:!!((null===(t=e.senderConfig)||void 0===t?void 0:t.uiProperties.error)||(null===(r=e.recipientConfig)||void 0===r?void 0:r.uiProperties.error)||(null===(n=e.gasConfig)||void 0===n?void 0:n.uiProperties.error)||(null===(o=e.amountConfig)||void 0===o?void 0:o.uiProperties.error)||(null===(i=e.feeConfig)||void 0===i?void 0:i.uiProperties.error)||(null===(s=e.memoConfig)||void 0===s?void 0:s.uiProperties.error)||(null===(a=e.channelConfig)||void 0===a?void 0:a.uiProperties.error)||(null===(c=e.gasSimulator)||void 0===c?void 0:c.uiProperties.error))||"loading-block"===(null===(u=e.senderConfig)||void 0===u?void 0:u.uiProperties.loadingState)||"loading-block"===(null===(l=e.recipientConfig)||void 0===l?void 0:l.uiProperties.loadingState)||"loading-block"===(null===(d=e.gasConfig)||void 0===d?void 0:d.uiProperties.loadingState)||"loading-block"===(null===(h=e.amountConfig)||void 0===h?void 0:h.uiProperties.loadingState)||"loading-block"===(null===(f=e.feeConfig)||void 0===f?void 0:f.uiProperties.loadingState)||"loading-block"===(null===(p=e.memoConfig)||void 0===p?void 0:p.uiProperties.loadingState)||"loading-block"===(null===(g=e.channelConfig)||void 0===g?void 0:g.uiProperties.loadingState)||"loading-block"===(null===(m=e.gasSimulator)||void 0===m?void 0:m.uiProperties.loadingState)}}}}]);